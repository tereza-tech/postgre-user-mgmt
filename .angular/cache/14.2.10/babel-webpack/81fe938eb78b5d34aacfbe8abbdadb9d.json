{"ast":null,"code":"var __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nimport crossFetch, { Headers as CrossFetchHeaders } from 'cross-fetch';\nexport const resolveFetch = customFetch => {\n  let _fetch;\n\n  if (customFetch) {\n    _fetch = customFetch;\n  } else if (typeof fetch === 'undefined') {\n    _fetch = crossFetch;\n  } else {\n    _fetch = fetch;\n  }\n\n  return (...args) => _fetch(...args);\n};\nexport const resolveHeadersConstructor = () => {\n  if (typeof Headers === 'undefined') {\n    return CrossFetchHeaders;\n  }\n\n  return Headers;\n};\nexport const fetchWithAuth = (supabaseKey, getAccessToken, customFetch) => {\n  const fetch = resolveFetch(customFetch);\n  const HeadersConstructor = resolveHeadersConstructor();\n  return (input, init) => __awaiter(void 0, void 0, void 0, function* () {\n    var _a;\n\n    const accessToken = (_a = yield getAccessToken()) !== null && _a !== void 0 ? _a : supabaseKey;\n    let headers = new HeadersConstructor(init === null || init === void 0 ? void 0 : init.headers);\n\n    if (!headers.has('apikey')) {\n      headers.set('apikey', supabaseKey);\n    }\n\n    if (!headers.has('Authorization')) {\n      headers.set('Authorization', `Bearer ${accessToken}`);\n    }\n\n    return fetch(input, Object.assign(Object.assign({}, init), {\n      headers\n    }));\n  });\n};","map":{"version":3,"names":["__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","Promise","reject","fulfilled","step","next","e","rejected","result","done","then","apply","crossFetch","Headers","CrossFetchHeaders","resolveFetch","customFetch","_fetch","fetch","args","resolveHeadersConstructor","fetchWithAuth","supabaseKey","getAccessToken","HeadersConstructor","input","init","_a","accessToken","headers","has","set","Object","assign"],"sources":["/home/runner/Usrmgmt/node_modules/@supabase/supabase-js/dist/module/lib/fetch.js"],"sourcesContent":["var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport crossFetch, { Headers as CrossFetchHeaders } from 'cross-fetch';\nexport const resolveFetch = (customFetch) => {\n    let _fetch;\n    if (customFetch) {\n        _fetch = customFetch;\n    }\n    else if (typeof fetch === 'undefined') {\n        _fetch = crossFetch;\n    }\n    else {\n        _fetch = fetch;\n    }\n    return (...args) => _fetch(...args);\n};\nexport const resolveHeadersConstructor = () => {\n    if (typeof Headers === 'undefined') {\n        return CrossFetchHeaders;\n    }\n    return Headers;\n};\nexport const fetchWithAuth = (supabaseKey, getAccessToken, customFetch) => {\n    const fetch = resolveFetch(customFetch);\n    const HeadersConstructor = resolveHeadersConstructor();\n    return (input, init) => __awaiter(void 0, void 0, void 0, function* () {\n        var _a;\n        const accessToken = (_a = (yield getAccessToken())) !== null && _a !== void 0 ? _a : supabaseKey;\n        let headers = new HeadersConstructor(init === null || init === void 0 ? void 0 : init.headers);\n        if (!headers.has('apikey')) {\n            headers.set('apikey', supabaseKey);\n        }\n        if (!headers.has('Authorization')) {\n            headers.set('Authorization', `Bearer ${accessToken}`);\n        }\n        return fetch(input, Object.assign(Object.assign({}, init), { headers }));\n    });\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}