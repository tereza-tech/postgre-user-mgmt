{"ast":null,"code":"var __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nimport { resolveFetch } from './helper';\nimport { FunctionsFetchError, FunctionsHttpError, FunctionsRelayError } from './types';\nexport class FunctionsClient {\n  constructor(url, {\n    headers = {},\n    customFetch\n  } = {}) {\n    this.url = url;\n    this.headers = headers;\n    this.fetch = resolveFetch(customFetch);\n  }\n  /**\n   * Updates the authorization header\n   * @param token - the new jwt token sent in the authorisation header\n   */\n\n\n  setAuth(token) {\n    this.headers.Authorization = `Bearer ${token}`;\n  }\n  /**\n   * Invokes a function\n   * @param functionName - the name of the function to invoke\n   */\n\n\n  invoke(functionName, invokeOptions = {}) {\n    var _a;\n\n    return __awaiter(this, void 0, void 0, function* () {\n      try {\n        const {\n          headers,\n          body: functionArgs\n        } = invokeOptions;\n        let _headers = {};\n        let body;\n\n        if (functionArgs && (headers && !Object.prototype.hasOwnProperty.call(headers, 'Content-Type') || !headers)) {\n          if (typeof Blob !== 'undefined' && functionArgs instanceof Blob || functionArgs instanceof ArrayBuffer) {\n            // will work for File as File inherits Blob\n            // also works for ArrayBuffer as it is the same underlying structure as a Blob\n            _headers['Content-Type'] = 'application/octet-stream';\n            body = functionArgs;\n          } else if (typeof functionArgs === 'string') {\n            // plain string\n            _headers['Content-Type'] = 'text/plain';\n            body = functionArgs;\n          } else if (typeof FormData !== 'undefined' && functionArgs instanceof FormData) {\n            // don't set content-type headers\n            // Request will automatically add the right boundary value\n            body = functionArgs;\n          } else {\n            // default, assume this is JSON\n            _headers['Content-Type'] = 'application/json';\n            body = JSON.stringify(functionArgs);\n          }\n        }\n\n        const response = yield this.fetch(`${this.url}/${functionName}`, {\n          method: 'POST',\n          // headers priority is (high to low):\n          // 1. invoke-level headers\n          // 2. client-level headers\n          // 3. default Content-Type header\n          headers: Object.assign(Object.assign(Object.assign({}, _headers), this.headers), headers),\n          body\n        }).catch(fetchError => {\n          throw new FunctionsFetchError(fetchError);\n        });\n        const isRelayError = response.headers.get('x-relay-error');\n\n        if (isRelayError && isRelayError === 'true') {\n          throw new FunctionsRelayError(response);\n        }\n\n        if (!response.ok) {\n          throw new FunctionsHttpError(response);\n        }\n\n        let responseType = ((_a = response.headers.get('Content-Type')) !== null && _a !== void 0 ? _a : 'text/plain').split(';')[0].trim();\n        let data;\n\n        if (responseType === 'application/json') {\n          data = yield response.json();\n        } else if (responseType === 'application/octet-stream') {\n          data = yield response.blob();\n        } else if (responseType === 'multipart/form-data') {\n          data = yield response.formData();\n        } else {\n          // default to text\n          data = yield response.text();\n        }\n\n        return {\n          data,\n          error: null\n        };\n      } catch (error) {\n        return {\n          data: null,\n          error\n        };\n      }\n    });\n  }\n\n}","map":{"version":3,"names":["__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","Promise","reject","fulfilled","step","next","e","rejected","result","done","then","apply","resolveFetch","FunctionsFetchError","FunctionsHttpError","FunctionsRelayError","FunctionsClient","constructor","url","headers","customFetch","fetch","setAuth","token","Authorization","invoke","functionName","invokeOptions","_a","body","functionArgs","_headers","Object","prototype","hasOwnProperty","call","Blob","ArrayBuffer","FormData","JSON","stringify","response","method","assign","catch","fetchError","isRelayError","get","ok","responseType","split","trim","data","json","blob","formData","text","error"],"sources":["/home/runner/Usrmgmt/node_modules/@supabase/functions-js/dist/module/FunctionsClient.js"],"sourcesContent":["var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { resolveFetch } from './helper';\nimport { FunctionsFetchError, FunctionsHttpError, FunctionsRelayError, } from './types';\nexport class FunctionsClient {\n    constructor(url, { headers = {}, customFetch, } = {}) {\n        this.url = url;\n        this.headers = headers;\n        this.fetch = resolveFetch(customFetch);\n    }\n    /**\n     * Updates the authorization header\n     * @param token - the new jwt token sent in the authorisation header\n     */\n    setAuth(token) {\n        this.headers.Authorization = `Bearer ${token}`;\n    }\n    /**\n     * Invokes a function\n     * @param functionName - the name of the function to invoke\n     */\n    invoke(functionName, invokeOptions = {}) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const { headers, body: functionArgs } = invokeOptions;\n                let _headers = {};\n                let body;\n                if (functionArgs &&\n                    ((headers && !Object.prototype.hasOwnProperty.call(headers, 'Content-Type')) || !headers)) {\n                    if ((typeof Blob !== 'undefined' && functionArgs instanceof Blob) ||\n                        functionArgs instanceof ArrayBuffer) {\n                        // will work for File as File inherits Blob\n                        // also works for ArrayBuffer as it is the same underlying structure as a Blob\n                        _headers['Content-Type'] = 'application/octet-stream';\n                        body = functionArgs;\n                    }\n                    else if (typeof functionArgs === 'string') {\n                        // plain string\n                        _headers['Content-Type'] = 'text/plain';\n                        body = functionArgs;\n                    }\n                    else if (typeof FormData !== 'undefined' && functionArgs instanceof FormData) {\n                        // don't set content-type headers\n                        // Request will automatically add the right boundary value\n                        body = functionArgs;\n                    }\n                    else {\n                        // default, assume this is JSON\n                        _headers['Content-Type'] = 'application/json';\n                        body = JSON.stringify(functionArgs);\n                    }\n                }\n                const response = yield this.fetch(`${this.url}/${functionName}`, {\n                    method: 'POST',\n                    // headers priority is (high to low):\n                    // 1. invoke-level headers\n                    // 2. client-level headers\n                    // 3. default Content-Type header\n                    headers: Object.assign(Object.assign(Object.assign({}, _headers), this.headers), headers),\n                    body,\n                }).catch((fetchError) => {\n                    throw new FunctionsFetchError(fetchError);\n                });\n                const isRelayError = response.headers.get('x-relay-error');\n                if (isRelayError && isRelayError === 'true') {\n                    throw new FunctionsRelayError(response);\n                }\n                if (!response.ok) {\n                    throw new FunctionsHttpError(response);\n                }\n                let responseType = ((_a = response.headers.get('Content-Type')) !== null && _a !== void 0 ? _a : 'text/plain').split(';')[0].trim();\n                let data;\n                if (responseType === 'application/json') {\n                    data = yield response.json();\n                }\n                else if (responseType === 'application/octet-stream') {\n                    data = yield response.blob();\n                }\n                else if (responseType === 'multipart/form-data') {\n                    data = yield response.formData();\n                }\n                else {\n                    // default to text\n                    data = yield response.text();\n                }\n                return { data, error: null };\n            }\n            catch (error) {\n                return { data: null, error };\n            }\n        });\n    }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}